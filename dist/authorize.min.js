"use strict";!function(){angular.module("mr.authorize",["ui.router"]).provider("authorize",function(){var r=this;this._authed=function(r){return!!r.invoke(this.authed)},this._policies=function(r){return r.invoke(this.policies)},this.$get=["$injector","$state",function(e,t){"ngInject";function i(t){var i=r._policies(e);if(i)for(var n=0;n<i.length;n++)if(i[n].toUpperCase()===t.toUpperCase())return!0;return!1}function n(t){if(!t||!t.authed&&!t.policies)return!0;if(!r._authed(e))return 401;if(t.policies){for(var n=t.policies,u=!1,a=0;a<n.length;a++)i(n[a])&&(u=!0);if(!u)return 403}return!0}function u(r){var e=r.name.lastIndexOf(".");if(e<0)return null;var i=r.name.substring(0,e);return t.get(i)}function a(r){for(var e=[],t=r;;){e.push(t);var i=u(t);if(!i)break;t=i}return e}function o(r){var e=r.auth;if(!e)return null;if(e===!0)return{authed:!0};if(angular.isArray(e))return{policies:e};if(angular.isString(e))return{policies:[e]};if(angular.isObject(e))return e;throw new Error('auth property is invalid in the state: "'+r.name+'".')}function s(r){return angular.isFunction(r)||angular.isArray(r)}function f(){if(!s(r.authed)||!s(r.policies))throw new Error("Make sure you set authorizeProvider.authed and authorizeProvider.policies.")}return function(r){f();var e=r;if(angular.isString(r)&&(r=t.get(r)),!r)throw new Error('State "'+e+'" could not be resolved.');var i;i=r.name.lastIndexOf(".")<0?[r]:a(r);for(var u=0;u<i.length;u++){var s,l=o(i[u]);if((s=n(l))!==!0)return s;if(l&&l.override)break}return!0}}]})}();